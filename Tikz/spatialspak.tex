\documentclass{standalone}
\usepackage{fontspec}
\setmainfont{Times New Roman}
\usepackage[UTF8]{ctex}
\usepackage{tikz}
\usepackage{amsmath}
\usetikzlibrary{matrix,calc,shapes,backgrounds,patterns,positioning,decorations.pathreplacing}
\begin{document}
 \tikzstyle{choice}=[diamond,aspect=2,draw,thick]  
\begin{tikzpicture}
[
stepnode/.style={rectangle, rounded corners=0mm, draw=black, thick, align=center,width=0.5cm, height=0.5mm},
choicenode/.style={},
nodelabel/.style={font=\small},
rec/.style={rectangle, draw=none, rounded corners=3mm},
rec1/.style={rectangle, rounded corners=3mm},
]
\draw[rec, fill=lightgray!30,draw=black] (-3,0) rectangle (3,2) node[font=\bfseries] at (0, 1.5){Spatial-Extension};
\draw[rec, fill=darkgray!50] (-2,0) rectangle (2,1) node[font=\bfseries] at (0,0.5){RDD};
\draw[rec1, draw=black] (-3,2.2) rectangle (-1.2, 3.2) node[font=\footnotesize] at (-2.1, 2.7){PointRDD}; 
\draw[rec1, draw=black] (-3+2.1,2.2) rectangle (-1.2+2.1, 3.2) node[font=\footnotesize] at (-2.1+2.1, 2.7){LineRDD}; 
\draw[rec1, draw=black] (-3+2.1+2.1,2.2) rectangle (-1.2+2.1+2.1, 3.2) node[font=\footnotesize] at (-2.1+2.1+2.1, 2.7){PolygonRDD}; 
\path[draw, rounded corners=3mm] (-3, 3.4) -- (-3,4.9) -- (3,4.9) -- (3, 4.15) -- (0,4.15) -- (0,3.4) -- cycle node[font=\small] at (-1.5, 4.15){SpatialRDD};
\draw[rec1, draw=black] (0.2, 3.4) rectangle (3, 4.05) node[font=\small] at (1.6, 3.725) {Index};

\draw[rec1, draw=black] (-3,2.2+2.9) rectangle (-1.2, 3.2+2.9) node[font=\footnotesize] at (-2.1, 2.7+2.9){拓扑查询}; 
\draw[rec1, draw=black] (-3+2.1,2.2+2.9) rectangle (-1.2+2.1, 3.2+2.9) node[font=\footnotesize] at (-2.1+2.1, 2.7+2.9){KNN查询}; 
\draw[rec1, draw=black] (-3+2.1+2.1,2.2+2.9) rectangle (-1.2+2.1+2.1, 3.2+2.9) node[font=\footnotesize] at (-2.1+2.1+2.1, 2.7+2.9){空间连接查询}; 
\draw[thick, ->] (-2.1, 2) -- (-2.1 ,2.2);
\draw[thick, ->] (0, 2) -- (0,2.2);
\draw[thick, ->] (2.1, 2) -- (2.1 ,2.2);
%
\draw[thick, ->] (-2.1, 3.2) -- (-2.1 ,3.4);
\draw[thick, ->] (0, 3.2) -- (0,3.4);
\draw[thick, ->] (2.1, 3.2) -- (2.1 ,3.4);
%
\draw[thick, ->] (-2.1, 4.9) -- (-2.1 ,5.1);
\draw[thick, ->] (0, 4.9) -- (0,5.1);
\draw[thick, ->] (2.1, 4.9) -- (2.1 ,5.1);
\end{tikzpicture}
\end{document}